{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["var App = {};\r\n\r\nApp.contactList = {\r\n\r\n\tlist: null,\r\n\r\n\toptions: {\r\n\t    valueNames: [ \r\n\t    \t'name',\r\n\t    \t'email',\r\n\t    \t'phone',\r\n\t    \t{\r\n\t    \t\tattr: 'data-contact-id',\r\n\t    \t\tname: 'id'\r\n\t    \t}\r\n\t    ]\r\n\t},\r\n\r\n\tinit: function() {\r\n\t\tthis.list = new List('js-contactsList', this.options);\r\n\t},\r\n\r\n};\r\n\r\nApp.createContact = {\r\n\r\n\tinit: function() {\r\n\t\tthis.bindEvents();\r\n\t},\r\n\r\n\tbindEvents: function() {\r\n\t\t$(document)\r\n\t\t\t.on('submit', '.js-addNewContact', this.create.bind(this))\r\n\t\t\t.on('click', '.js-contactRemove', this.destroy.bind(this))\r\n\t\t\t.on('click', '.js-contactEdit', this.startEdit.bind(this));\r\n\t},\r\n\r\n\tcreate: function(event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar $form = $(event.currentTarget);\r\n\t\tvar data = $form.serializeJSON();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: $form.attr('action'),\r\n\t\t\ttype: $form.attr('method'),\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: $form.serialize(),\r\n\t\t})\r\n\t\t.done(function() {\r\n\r\n\t\t\tApp.contactList.list.add({\r\n\t\t\t\tname: data.name,\r\n\t\t\t\temail: data.email,\r\n\t\t\t\tphone: data.phone,\r\n\t\t\t});\r\n\r\n\t\t\t$form[0].reset();\r\n\t\t})\r\n\t\t.fail(function() {\r\n\t\t\tconsole.log(\"error\");\r\n\t\t})\r\n\t\t.always(function() {\r\n\t\t\tconsole.log(\"complete\");\r\n\t\t});\r\n\t\t\r\n\t},\r\n\r\n\tdestroy: function(event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar $el = $(event.currentTarget);\r\n\t\tvar $row = $el.closest('tr');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/contact/' + $row.data('contact-id'),\r\n\t\t\ttype: 'delete',\r\n\t\t\tdataType: 'json',\r\n\t\t})\r\n\t\t.done(function() {\r\n\t\t\t$row.remove();\t\r\n\t\t\tApp.contactList.list.reIndex();\r\n\t\t})\r\n\t\t.fail(function() {\r\n\t\t\tconsole.log(\"error\");\r\n\t\t})\r\n\t\t.always(function() {\r\n\t\t\tconsole.log(\"complete\");\r\n\t\t});\r\n\t\t\r\n\t},\r\n\r\n\tstartEdit: function(event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar $el = $(event.currentTarget);\r\n\t\tvar $row = $el.closest('tr');\r\n\r\n\t\tif ($row.find('.contactRow').hasClass('is-active')) {\r\n\t\t\tthis.edit(event);\r\n\t\t\t$el.html('Edit');\r\n\t\t} else {\r\n\t\t\t$el.html('Save');\r\n\t\t}\r\n\r\n\t\t$row.find('.contactRow').toggleClass('is-active');\r\n\t},\r\n\r\n\tedit: function(event) {\r\n\r\n\t\tvar $el = $(event.currentTarget);\r\n\t\tvar $row = $el.closest('tr');\r\n\r\n\t\tvar data = {\r\n\t\t\tname: $row.find('.js-editContactInputName').val(),\r\n\t\t\temail: $row.find('.js-editContactInputEmail').val(),\r\n\t\t\tphone: $row.find('.js-editContactInputPhone').val(),\r\n\t\t};\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/contact/' + $row.data('contact-id'),\r\n\t\t\ttype: 'put',\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: data, \r\n\t\t})\r\n\t\t.done(function() {\r\n\r\n\t\t\t$row.find('.js-contactDataName').html(data.name);\r\n\t\t\t$row.find('.js-contactDataEmail').html(data.email);\r\n\t\t\t$row.find('.js-contactDataPhone').html(data.phone);\r\n\r\n\t\t\tthis.contactList.reIndex();\r\n\t\t})\r\n\t\t.fail(function() {\r\n\t\t\tconsole.log(\"error\");\r\n\t\t})\r\n\t\t.always(function() {\r\n\t\t\tconsole.log(\"complete\");\r\n\t\t});\r\n\t\t\r\n\t},\r\n\r\n};\r\n\r\nApp.dropdown = (function() {\r\n\r\n\t'use strict';\r\n\r\n\tvar config = {\r\n\t\tdropdown: '.dropdown',\r\n\t\tdropdownMenu: '.dropdown-menu',\r\n\t\ttrigger: '.js-toggleDropdown',\r\n\t\tactiveClass: 'dropdown-active',\r\n\t};\r\n\r\n\t$(document).off(config.trigger);\r\n\r\n\t$(document).on('click.' + config.trigger, config.trigger, function(event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar $this = $(this);\r\n\t\tvar $dropdown  = $this.closest(config.dropdown).find(config.dropdownMenu);\r\n\t\tvar $dropdowns = $(config.dropdownMenu).not($dropdown).removeClass(config.activeClass);\r\n\r\n\t\topenDropdown($dropdown);\r\n\t});\r\n\r\n\t$(document).on('click.' + config.trigger, function(event) {\t\t\t\r\n\t\tif ($(event.target).closest(config.dropdown).length === 0) {\r\n\t\t\t$(config.dropdownMenu).removeClass(config.activeClass);  \r\n\t\t}\r\n\t});\r\n \r\n\tvar openDropdown = function(target) {\r\n\t\tvar $target = $(target);\r\n\t\t$target.toggleClass(config.activeClass);\r\n\t};\r\n\r\n\tvar closeDropdown = function(target) {\r\n\t\tif (!target) {\r\n\t\t\tthrow 'First argument must contain targeted dropdown.';\r\n\t\t}\r\n\t\t$(target).removeClass(config.activeClass);\r\n\t};\r\n\r\n\treturn {\r\n\t\topenDropdown: openDropdown,\r\n\t\tcloseDropdown: closeDropdown,\r\n\t};\r\n\r\n})();\r\n\r\n(function($) {\r\n\r\n    $.ajaxSetup({\r\n        headers: { 'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content') }\r\n    });\r\n\r\n    App.contactList.init();\r\n    App.createContact.init();\r\n\r\n})(jQuery);"],"sourceRoot":"/source/"}